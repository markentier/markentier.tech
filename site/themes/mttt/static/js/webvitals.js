'use strict';
// https://unpkg.com/web-vitals-element@1.0.1/dist/web-vitals-element.min.js
var t,e,n=function(){return"".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)},i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return{name:t,value:e,delta:0,entries:[],id:n(),isFinal:!1}},r=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var n=new PerformanceObserver((function(t){return t.getEntries().map(e)}));return n.observe({type:t,buffered:!0}),n}}catch(t){}},s=!1,a=!1,o=function(t){s=!t.persisted},u=function(){addEventListener("pagehide",o),addEventListener("unload",(function(){}))},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a||(u(),a=!0),addEventListener("visibilitychange",(function(e){var n=e.timeStamp;"hidden"===document.visibilityState&&t({timeStamp:n,isUnloading:s})}),{capture:!0,once:e})},p=function(t,e,n,i){var r;return function(){n&&e.isFinal&&n.disconnect(),e.value>=0&&(i||e.isFinal||"hidden"===document.visibilityState)&&(e.delta=e.value-(r||0),(e.delta||e.isFinal||void 0===r)&&(t(e),r=e.value))}},l=function(){return void 0===t&&(t="hidden"===document.visibilityState?0:1/0,c((function(e){var n=e.timeStamp;return t=n}),!0)),{get timeStamp(){return t}}},d=function(){return e||(e=new Promise((function(t){return["scroll","keydown","pointerdown"].map((function(e){addEventListener(e,t,{once:!0,passive:!0,capture:!0})}))}))),e},v=Object.freeze({__proto__:null,getCLS:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=i("CLS",0),a=function(t){t.hadRecentInput||(s.value+=t.value,s.entries.push(t),e())},o=r("layout-shift",a);o&&(e=p(t,s,o,n),c((function(t){var n=t.isUnloading;o.takeRecords().map(a),n&&(s.isFinal=!0),e()})))},getFCP:function(t){var e,n=i("FCP"),s=l(),a=r("paint",(function(t){"first-contentful-paint"===t.name&&t.startTime<s.timeStamp&&(n.value=t.startTime,n.isFinal=!0,n.entries.push(t),e())}));a&&(e=p(t,n,a))},getFID:function(t){var e=i("FID"),n=l(),s=function(t){t.startTime<n.timeStamp&&(e.value=t.processingStart-t.startTime,e.entries.push(t),e.isFinal=!0,o())},a=r("first-input",s),o=p(t,e,a);a?c((function(){a.takeRecords().map(s),a.disconnect()}),!0):window.perfMetrics&&window.perfMetrics.onFirstInputDelay&&window.perfMetrics.onFirstInputDelay((function(t,i){i.timeStamp<n.timeStamp&&(e.value=t,e.isFinal=!0,e.entries=[{entryType:"first-input",name:i.type,target:i.target,cancelable:i.cancelable,startTime:i.timeStamp,processingStart:i.timeStamp+t}],o())}))},getLCP:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=i("LCP"),a=l(),o=function(t){var n=t.startTime;n<a.timeStamp?(s.value=n,s.entries.push(t)):s.isFinal=!0,e()},u=r("largest-contentful-paint",o);if(u){e=p(t,s,u,n);var v=function(){s.isFinal||(u.takeRecords().map(o),s.isFinal=!0,e())};d().then(v),c(v,!0)}},getTTFB:function(t){var e,n=i("TTFB");e=function(){try{var e=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,e={entryType:"navigation",startTime:0};for(var n in t)"navigationStart"!==n&&"toJSON"!==n&&(e[n]=Math.max(t[n]-t.navigationStart,0));return e}();n.value=n.delta=e.responseStart,n.entries=[e],n.isFinal=!0,t(n)}catch(t){}},"complete"===document.readyState?setTimeout(e,0):addEventListener("pageshow",e)}});const m=new Map([["CLS",{threshold:.1,observerEntryType:"layout-shift",explainerURL:"https://web.dev/cls/"}],["FCP",{threshold:2500,observerEntryType:"paint",explainerURL:"https://web.dev/fcp/",unit:"ms"}],["FID",{threshold:100,observerEntryType:"first-input",explainerURL:"https://web.dev/fid/",unit:"ms"}],["LCP",{threshold:2500,observerEntryType:"paint",explainerURL:"https://web.dev/lcp/",unit:"ms"}],["TTFB",{threshold:2500,explainerURL:"https://web.dev/time-to-first-byte/",unit:"ms"}]]),h=["class","style"],f=["show-unsupported"];class g extends HTMLElement{constructor(){super(),this.unsupportedMetrics=[],this.metrics=new Map}connectedCallback(){const t=this.getMetricAttributes(),e=t.length?t:[...m.keys()];this.metrics=this.getMetrics(e),this.render();for(let t of this.metrics.values()){const{name:e,getWebVitalsValue:n}=t;n(n=>{this.metrics.set(e,{...t,...n}),this.render()},!0)}}getMetricAttributes(){return this.getAttributeNames().filter(t=>!h.includes(t)&&!f.includes(t)).map(t=>t.toUpperCase())}getMetrics(t){return new Map(t.reduce((t,e)=>{const n=v["get"+e];if(!n)return console.error(e+" is not supported by '<web-vitals />'"),this.unsupportedMetrics.push(e),t;const i=m.get(e),{observerEntryType:r}=i;return r&&!PerformanceObserver.supportedEntryTypes.includes(r)?(console.error(e+" is not supported by your browser"),this.unsupportedMetrics.push(e),t):[...t,[e,{...m.get(e),getWebVitalsValue:n,name:e}]]},[]))}render(){this.innerHTML=`<div class="web-vitals">\n      <dl>\n        ${[...this.metrics].map(([t,e])=>{const{explainerURL:n,isFinal:i,threshold:r,unit:s,value:a}=e;let o="";return i&&(o+="is-final ",o+=a>r?"is-poor":"is-great"),`\n            <div class="${o}">\n              <dt><a href="${n}">${t}</a></dt>\n              <dd>${a?`${Math.floor(a)}${s||""}`:"..."}</dd>\n            </div>\n          `}).join("")}\n      </dl>\n        ${this.unsupportedMetrics.length&&this.hasAttribute("show-unsupported")?`<p>Not supported: ${this.unsupportedMetrics.join(", ")}</p>`:""}\n    </div>`}}customElements.define("web-vitals",g);

(() => {
  const addVitals = () => {
    const footer = document.querySelector("footer[class=footer]");
    footer.innerHTML += `<br><web-vitals show-unsupported></web-vitals>`;
  };
  // addEventListener("DOMContentLoaded", addVitals);
  // addVitals();
  setTimeout(addVitals, 0);
})();
